(function(a,u,c,f,l){"use strict";const{FormText:R,FormRow:h,FormInput:d,FormSwitch:g}=f.Forms,{ScrollView:p}=c.ReactNative;function m(){return c.React.createElement(p,null,c.React.createElement(d,{title:"Key",value:l.storage.key||"default",onSubmitEditing:function(e){return l.storage.key=e.nativeEvent.text},placeholder:"Secret key to encrypt messages",returnKeyType:"done",secureTextEntry:!0}),c.React.createElement(h,{label:"Auto shorten text",subLabel:"Shorten encrypted text by replacing specific char. Can be detected by AutoMod.",trailing:c.React.createElement(g,{value:l.storage.shorten_text,onValueChange:function(e){return l.storage.shorten_text=e}})}))}function i(e,t){let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e.charCodeAt(n)^t.charCodeAt(n%t.length));return r}function y(e){return`${i("secret",e).slice(0,3).padStart(3,"?")}`}function E(e){return`\`<${e.slice(0,2)}${"*".repeat(Math.max(e.length-2,0))}>\``}function $(e,t){const r=e.slice(0,t),n=e.slice(t+1);return`${r}${n}`}function A(e,t){let r=2;if(e.length<=9){if(e.slice(2,5)==t)return e.slice(5,-2)}else{let n=Math.floor((e.length-r*2-3)/3),o=`${e[n-1+(1-1)+r]}${e[n*2-1+(2-1)+r]}${e[n*3-1+(3-1)+r]}`;if(e=e.slice(2,-2),t==o)return[3,2,1].forEach(function(s){e=$(e,n*s-1+(s-1))}),e}return!1}function v(e){let t=l.storage.key,r=y(t),n=E(t),o=A(e,r);return o?`${i(S(o),t)} ${n}`:e}function S(e){return e.replaceAll("\u2004","\r").replaceAll("\u2001",`
`).replaceAll("\u2002","\v").replaceAll("\u2003","\f")}const b=[u.patcher.before("dispatch",u.metro.common.FluxDispatcher,function(e){let[t]=e;if(t.type=="MESSAGE_CREATE")return t.message.content=v(t.message.content),[t]})];function x(){b.forEach(function(e){return e()})}const C=m;return a.onUnload=x,a.settings=C,a})({},vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.plugin);
